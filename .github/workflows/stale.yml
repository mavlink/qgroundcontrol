name: Stale

on:
  schedule:
    - cron: '30 1 * * *'

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    name: Mark Stale Issues
    runs-on: ubuntu-latest
    timeout-minutes: 15
    steps:
      - name: Harden Runner
        uses: step-security/harden-runner@v2
        with:
          egress-policy: audit

      - name: Mark stale issues and PRs
        uses: actions/stale@v10
        with:
          days-before-stale: 90
          days-before-close: -1
          stale-issue-label: 'stale'
          stale-pr-label: 'stale'
          remove-stale-when-updated: true
          stale-issue-message: >
            This issue has been automatically marked as stale due to 90 days of inactivity.
            It will remain open but may receive lower priority. If this is still relevant,
            please comment to remove the stale label.
          stale-pr-message: >
            This PR has been automatically marked as stale due to 90 days of inactivity.
            Please rebase and update if still relevant, or it may be closed in the future.
